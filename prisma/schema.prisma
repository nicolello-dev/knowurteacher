datasource db {
  provider = "postgresql"
  url      = env("POSTGREDB_URL")
}

generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

model Teacher {
  id         String   @id @default(uuid())
  added_date DateTime @default(now()) @db.Timestamptz(3)
  name       String
  school     String
  photoURL   String?
  Reviews    Review[]

  @@unique([name, school])
  @@index([name, school])
}

model User {
  id        String   @id @default(uuid())
  email     String   @unique
  join_date DateTime @default(now()) @db.Timestamptz(3)
  username  String
  school    String?
  photoURL  String?
  Reviews   Review[]

  @@index([email, username])
}

model Review {
  id        String   @id @default(uuid()) @db.Uuid
  createdAt DateTime @default(now()) @db.Timestamptz(3)
  updatedAt DateTime @updatedAt @db.Timestamptz(3)
  author    User     @relation(fields: [authorID], references: [id])
  authorID  String
  teacher   Teacher  @relation(fields: [teacherID], references: [id])
  teacherID String
  teaching  String   @db.Text
  fairness  String   @db.Text
  general   String   @db.Text
  reports   Int      @default(0)

  @@unique([authorID, teacherID])
}
